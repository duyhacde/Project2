{"ast":null,"code":"var _jsxFileName = \"D:\\\\BKA_subject\\\\20212\\\\Project_II\\\\pizzaHust\\\\Project2-PizzaHust\\\\src\\\\components\\\\mainpages\\\\order\\\\OrderDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction OrderDetails() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [history] = state.userAPI.history;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [orderDetails, setOrderDetails] = useState([]);\n  const [status, setStatus] = useState('');\n  const params = useParams();\n  const [token] = state.token;\n  useEffect(() => {\n    console.log(history);\n\n    if (params.id) {\n      history.forEach(item => {\n        if (item._id === params.id) setOrderDetails(item);\n      });\n    }\n  }, [params.id, history]);\n\n  const handleChange = e => {\n    setStatus(e.target.value);\n    console.log(status);\n  };\n\n  const onUpdate = async () => {\n    try {\n      await axios.put(`/api/order/${params.id}`, {\n        status\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  if (orderDetails.length === 0) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"M\\xE3 \\u0111\\u01A1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: orderDetails.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: orderDetails.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: params.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: isAdmin ? /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: handleChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: orderDetails.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 29\n              }, this), orderDetails.status === 'pending' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"transporting\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 60\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"completed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true) : orderDetails.status === 'transporting' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 98\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"completed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 61\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"transporting\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 38\n            }, this) : orderDetails.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        margin: \"30px 0px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: orderDetails.cart.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.images.url,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [item.price * item.quantity, \".000\\u0111\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"update\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onUpdate,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderDetails, \"lBX2NWUqRH2ldmkeXIMy8Nv65gA=\", false, function () {\n  return [useParams];\n});\n\n_c = OrderDetails;\nexport default OrderDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetails\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","GlobalState","axios","OrderDetails","state","history","userAPI","isAdmin","orderDetails","setOrderDetails","status","setStatus","params","token","console","log","id","forEach","item","_id","handleChange","e","target","value","onUpdate","put","headers","Authorization","err","alert","length","name","address","margin","cart","map","images","url","title","quantity","price"],"sources":["D:/BKA_subject/20212/Project_II/pizzaHust/Project2-PizzaHust/src/components/mainpages/order/OrderDetails.js"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\nfunction OrderDetails() {\r\n    const state = useContext(GlobalState)\r\n    const [history] = state.userAPI.history\r\n    const [isAdmin] =state.userAPI.isAdmin\r\n    const [orderDetails, setOrderDetails] = useState([])\r\n    const [status,setStatus]=useState('')\r\n    const params = useParams()\r\n    const [token] = state.token\r\n    useEffect(() => {\r\n        console.log(history)\r\n        if(params.id){\r\n            history.forEach(item =>{\r\n                if(item._id === params.id) setOrderDetails(item)\r\n            })\r\n        }\r\n    },[params.id, history])\r\n\r\n    const handleChange=(e)=>{\r\n        setStatus(e.target.value);\r\n        console.log(status)\r\n    }\r\n    const onUpdate=async()=>{\r\n        try{\r\n             await axios.put(`/api/order/${params.id}`,{status},{\r\n                headers: {Authorization: token}\r\n            })\r\n        }\r\n        catch(err){\r\n            alert(err);\r\n        }\r\n    }\r\n    if(orderDetails.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"history-page\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Address</th>\r\n                        <th>Mã đơn</th>\r\n                        <th>Trạng thái</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{orderDetails.name}</td>\r\n                        <td>{orderDetails.address}</td>\r\n                        <td>{params.id}</td>\r\n                        <td>{isAdmin?<select onChange={handleChange}>\r\n                            <option>{orderDetails.status}</option>\r\n                        {orderDetails.status==='pending'?<><option>transporting</option>\r\n                            <option>completed</option></>:orderDetails.status==='transporting'?<><option>pending</option>\r\n                            <option>completed</option></>:<><option>pending</option>\r\n                            <option>transporting</option></>}   \r\n                            \r\n                            </select>:orderDetails.status}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <table style={{margin: \"30px 0px\"}}>\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Products</th>\r\n                        <th>Quantity</th>\r\n                        <th>Price</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        orderDetails.cart.map(item =>(\r\n                        <tr key={item._id}>\r\n                            <td><img src={item.images.url} alt=\"\" /></td>\r\n                            <td>{item.title}</td>\r\n                            <td>{item.quantity}</td>\r\n                            <td>{item.price * item.quantity}.000đ</td>\r\n                        </tr>\r\n                        ))\r\n                    }\r\n                    \r\n                </tbody>\r\n            </table>\r\n            {isAdmin?<div className='update'>\r\n                <button onClick={onUpdate}>Update</button>\r\n            </div>:<></>}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderDetails"],"mappings":"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"},"metadata":{},"sourceType":"module"}